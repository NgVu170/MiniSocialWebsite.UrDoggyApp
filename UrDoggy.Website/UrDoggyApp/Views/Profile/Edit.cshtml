@model UrDoggy.Core.Models.User

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var defaultAvatar = Url.Content("~/images/default-avatar.png");
    string avatarUrl = string.IsNullOrWhiteSpace(Model.ProfilePicture)
        ? defaultAvatar
        : Url.Content(Model.ProfilePicture);
}

<style>
    form[asp-action="Edit"] {
        animation: slideIn 0.5s ease-out;
        max-width: 700px;
        margin: 2rem auto;
        padding: 2.5rem;
        background: rgba(255, 255, 255, 0.98);
        border-radius: 1.5rem;
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.06);
    }

    @@keyframes slideIn {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .rounded-circle[style*="100px"] {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        border: 3px solid transparent;
        background-image: linear-gradient(white, white), linear-gradient(135deg, #25D366 0%, #0984e3 100%);
        background-origin: border-box;
        background-clip: content-box, border-box;
    }

    .rounded-circle:hover {
        transform: scale(1.05) rotate(3deg);
        box-shadow: 0 8px 24px rgba(37, 211, 102, 0.15);
    }

    #avatar {
        opacity: 0;
        position: absolute;
        z-index: -1;
    }

    .form-control[type="file"] + label {
        display: block;
        padding: 1.2rem;
        border: 2px dashed rgba(37, 211, 102, 0.3);
        border-radius: 1rem;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

        .form-control[type="file"] + label::before {
            content: '📤 Drag & Drop or Click';
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(37, 211, 102, 0.05);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .form-control[type="file"] + label:hover {
            border-color: #25D366;
            background: rgba(37, 211, 102, 0.03);
        }

            .form-control[type="file"] + label:hover::before {
                opacity: 1;
            }

    .form-control {
        border: 2px solid rgba(0, 0, 0, 0.08);
        padding: 0.8rem 1.2rem;
        transition: all 0.3s ease;
    }

        .form-control:focus {
            border-color: #25D366;
            box-shadow: 0 0 0 3px rgba(37, 211, 102, 0.15);
        }

    #bio {
        min-height: 120px;
        background: linear-gradient(white, white), linear-gradient(180deg, #25D366 0%, #0984e3 100%);
        background-size: 100% 100%, 100% 3px;
        background-repeat: no-repeat;
        background-position: bottom;
    }

    .btn-primary {
        background: linear-gradient(135deg, #25D366 0%, #0984e3 100%);
        border: none;
        padding: 0.8rem 2rem;
        border-radius: 2rem;
        position: relative;
        overflow: hidden;
    }

        .btn-primary::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: shine 1.5s infinite;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(37, 211, 102, 0.25);
        }

    button[disabled] {
        opacity: 0.8;
        position: relative;
    }

        button[disabled]::after {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

    @@media (max-width: 768px) {
        form[asp-action="Edit"] {
            margin: 1rem;
            padding: 1.5rem;
        }

        .rounded-circle[style*="100px"] {
            width: 80px !important;
            height: 80px !important;
        }

        .btn-primary {
            width: 100%;
            margin-bottom: 0.5rem;
        }
    }

    @@keyframes spin {
        to {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }

    @@keyframes shine {
        to {
            left: 150%;
        }
    }
</style>

<h2>Edit Profile</h2>

<form asp-action="Edit"
      method="post"
      enctype="multipart/form-data">
    @Html.AntiForgeryToken()

    <div class="mb-3">
        <label class="form-label">Current Avatar</label><br />
        <img src="@avatarUrl"
             alt="Avatar"
             class="rounded-circle"
             style="width:100px;height:100px;" />
    </div>

    <div class="mb-3">
        <label for="avatar" class="form-label">Upload New Avatar</label>
        <input type="file"
               name="avatar"
               id="avatar"
               accept="image/*"
               class="form-control" />
    </div>

    <div class="mb-3">
        <label for="displayName" class="form-label">Display Name</label>
        <input type="text"
               name="displayName"
               id="displayName"
               value="@Model.DisplayName"
               class="form-control" />
    </div>

    <div class="mb-3">
        <label for="bio" class="form-label">Bio</label>
        <textarea name="bio"
                  id="bio"
                  class="form-control"
                  rows="3">@Model.Bio</textarea>
    </div>

    <button type="submit" class="btn btn-primary">Save Changes</button>
    <a asp-action="Index" class="btn btn-secondary ms-2">Cancel</a>
</form>